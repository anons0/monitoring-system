{% extends 'base.html' %}

{% block title %}Dashboard - Telegram Monitoring System{% endblock %}

{% block page_title %}
    <div class="d-flex align-items-center justify-content-between">
        <div>
            <i class="fas fa-tachometer-alt me-3 text-primary"></i>
            Dashboard
            <small class="text-muted d-block mt-1">Monitor your Telegram bots and chats in real-time</small>
        </div>
        <div class="d-flex gap-2">
            <button class="btn btn-outline-primary" onclick="refreshDashboard()">
                <i class="fas fa-sync-alt me-2"></i>
                Refresh
            </button>
            <button class="btn btn-primary" onclick="exportData()">
                <i class="fas fa-download me-2"></i>
                Export Data
            </button>
        </div>
    </div>
{% endblock %}

{% block content %}
<style>
/* Enhanced Dashboard Styles */
.dashboard-header {
    background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    border-radius: var(--radius-2xl);
    padding: 2rem;
    margin-bottom: 2rem;
    box-shadow: var(--shadow-lg);
    border: 1px solid var(--border-color);
}

.welcome-message {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.welcome-subtitle {
    color: var(--text-secondary);
    font-size: 1rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2.5rem;
}

.enhanced-stat-card {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    padding: 2rem;
    position: relative;
    overflow: hidden;
    transition: all var(--transition-normal);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}

.enhanced-stat-card:hover {
    transform: translateY(-4px);
    box-shadow: var(--shadow-xl);
}

.enhanced-stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: var(--primary-gradient);
}

.enhanced-stat-card.bot-stats::before {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.enhanced-stat-card.account-stats::before {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.enhanced-stat-card.message-stats::before {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}

.enhanced-stat-card.activity-stats::before {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
}

.stat-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.stat-icon {
    width: 60px;
    height: 60px;
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.75rem;
    color: white;
    background: var(--primary-gradient);
}

.stat-icon.bot-icon {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.stat-icon.account-icon {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
}

.stat-icon.message-icon {
    background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
}

.stat-icon.activity-icon {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--text-primary);
    margin: 0;
    line-height: 1;
    margin-bottom: 0.5rem;
}

.stat-label {
    font-size: 1rem;
    color: var(--text-secondary);
    margin: 0;
    font-weight: 500;
}

.stat-change {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    font-weight: 600;
    margin-top: 1rem;
}

.stat-change.positive {
    color: var(--success-600);
}

.stat-change.negative {
    color: var(--danger-600);
}

.stat-change.neutral {
    color: var(--text-muted);
}

.chart-container {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    padding: 2rem;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--border-color);
    margin-bottom: 2rem;
    transition: all var(--transition-normal);
}

.chart-container:hover {
    box-shadow: var(--shadow-lg);
}

.chart-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 1.5rem;
}

.chart-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.chart-icon {
    width: 40px;
    height: 40px;
    background: var(--primary-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.125rem;
}

.chart-controls {
    display: flex;
    gap: 0.5rem;
}

.chart-period-btn {
    padding: 0.5rem 1rem;
    border: 1px solid var(--border-color);
    background: var(--bg-primary);
    color: var(--text-secondary);
    border-radius: var(--radius-lg);
    font-size: 0.875rem;
    font-weight: 500;
    transition: all var(--transition-normal);
    cursor: pointer;
}

.chart-period-btn.active {
    background: var(--primary-gradient);
    color: white;
    border-color: transparent;
}

.chart-period-btn:hover:not(.active) {
    background: var(--bg-tertiary);
    color: var(--text-primary);
}

.enhanced-chat-section {
    background: var(--bg-primary);
    border-radius: var(--radius-xl);
    box-shadow: var(--shadow-sm);
    overflow: hidden;
    margin-bottom: 2rem;
    border: 1px solid var(--border-color);
    transition: all var(--transition-normal);
}

.enhanced-chat-section:hover {
    box-shadow: var(--shadow-lg);
}

.enhanced-chat-header {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    border-bottom: 2px solid var(--border-color);
    padding: 1.5rem 2rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.enhanced-section-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.enhanced-section-icon {
    width: 40px;
    height: 40px;
    background: var(--primary-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.25rem;
}

.enhanced-view-all-btn {
    background: var(--primary-gradient);
    color: white;
    border: none;
    padding: 0.75rem 1.5rem;
    border-radius: var(--radius-lg);
    font-weight: 600;
    text-decoration: none;
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.enhanced-view-all-btn:hover {
    color: white;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.enhanced-chat-list {
    padding: 0;
}

.enhanced-chat-item {
    padding: 1.5rem 2rem;
    border-bottom: 1px solid var(--border-color);
    transition: all var(--transition-normal);
    display: flex;
    align-items: center;
    gap: 1rem;
    position: relative;
    background: var(--bg-primary);
    cursor: pointer;
}

.enhanced-chat-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 0;
    background: var(--primary-gradient);
    transition: width var(--transition-normal);
}

.enhanced-chat-item:hover {
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
    transform: translateX(4px);
}

.enhanced-chat-item:hover::before {
    width: 4px;
}

.enhanced-chat-item:last-child {
    border-bottom: none;
}

.enhanced-chat-avatar {
    width: 50px;
    height: 50px;
    background: var(--primary-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    font-weight: 600;
    flex-shrink: 0;
    box-shadow: var(--shadow-sm);
}

.enhanced-chat-content {
    flex: 1;
    min-width: 0;
}

.enhanced-chat-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin: 0 0 0.25rem;
    line-height: 1.4;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.enhanced-chat-meta {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: var(--text-muted);
    font-size: 0.875rem;
}

.enhanced-chat-meta-item {
    display: flex;
    align-items: center;
    gap: 0.25rem;
}

.enhanced-chat-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
    flex-shrink: 0;
}

.enhanced-unread-badge {
    background: var(--danger-gradient);
    color: white;
    font-size: 0.75rem;
    font-weight: 700;
    min-width: 1.75rem;
    height: 1.75rem;
    border-radius: 0.875rem;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-sm);
    animation: pulse 2s infinite;
}

.enhanced-status-badge {
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-full);
    font-size: 0.75rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.025em;
}

.status-active {
    background: rgba(34, 197, 94, 0.1);
    color: var(--success-600);
}

.status-inactive {
    background: rgba(107, 114, 128, 0.1);
    color: var(--text-muted);
}

.enhanced-empty-state {
    text-align: center;
    padding: 4rem 2rem;
    color: var(--text-muted);
}

.enhanced-empty-state-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.3;
    color: var(--text-muted);
}

.enhanced-empty-state h5 {
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.enhanced-empty-state p {
    font-size: 1rem;
    margin-bottom: 1.5rem;
}

.quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
    margin-bottom: 2rem;
}

.quick-action-card {
    background: var(--bg-primary);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-xl);
    padding: 1.5rem;
    text-align: center;
    transition: all var(--transition-normal);
    cursor: pointer;
    text-decoration: none;
    color: inherit;
}

.quick-action-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
    color: inherit;
    text-decoration: none;
}

.quick-action-icon {
    width: 60px;
    height: 60px;
    background: var(--primary-gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.5rem;
    margin: 0 auto 1rem;
}

.quick-action-title {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: 0.5rem;
}

.quick-action-desc {
    font-size: 0.875rem;
    color: var(--text-secondary);
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .stats-grid {
        grid-template-columns: 1fr;
    }
    
    .quick-actions {
        grid-template-columns: 1fr;
    }
    
    .chart-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
    
    .enhanced-chat-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 1rem;
    }
}
</style>

<!-- Dashboard Header -->
<div class="dashboard-header">
    <div class="welcome-message">
        Welcome back, {{ user.username }}! 👋
    </div>
    <div class="welcome-subtitle">
        Here's what's happening with your Telegram monitoring system today.
    </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions">
    <a href="{% url 'core:bots' %}" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-robot"></i>
        </div>
        <div class="quick-action-title">Manage Bots</div>
        <div class="quick-action-desc">Add, edit, or monitor your Telegram bots</div>
    </a>
    
    <a href="{% url 'core:chats' %}" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-comments"></i>
        </div>
        <div class="quick-action-title">View Chats</div>
        <div class="quick-action-desc">Monitor all your bot conversations</div>
    </a>
    
    {% if user.is_superuser %}
    <a href="{% url 'core:user_management' %}" class="quick-action-card">
        <div class="quick-action-icon">
            <i class="fas fa-users-cog"></i>
        </div>
        <div class="quick-action-title">User Management</div>
        <div class="quick-action-desc">Manage system users and permissions</div>
    </a>
    {% endif %}
    
    <a href="#" class="quick-action-card" onclick="showSystemStatus()">
        <div class="quick-action-icon">
            <i class="fas fa-chart-line"></i>
        </div>
        <div class="quick-action-title">System Status</div>
        <div class="quick-action-desc">Check system health and performance</div>
    </a>
</div>

<!-- Enhanced Statistics Grid -->
<div class="stats-grid">
    <div class="enhanced-stat-card bot-stats">
        <div class="stat-header">
            <div>
                <div class="stat-number" id="total-bots">{{ bot_stats.total|default:0 }}</div>
                <div class="stat-label">Total Bots</div>
            </div>
            <div class="stat-icon bot-icon">
                <i class="fas fa-robot"></i>
            </div>
        </div>
        <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ bot_stats.active|default:0 }} active</span>
        </div>
    </div>
    
    <div class="enhanced-stat-card account-stats">
        <div class="stat-header">
            <div>
                <div class="stat-number" id="total-accounts">{{ bot_stats.accounts|default:0 }}</div>
                <div class="stat-label">Connected Accounts</div>
            </div>
            <div class="stat-icon account-icon">
                <i class="fas fa-user-check"></i>
            </div>
        </div>
        <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ bot_stats.accounts|default:0 }} connected</span>
        </div>
    </div>
    
    <div class="enhanced-stat-card message-stats">
        <div class="stat-header">
            <div>
                <div class="stat-number" id="total-messages">{{ bot_stats.messages|default:0 }}</div>
                <div class="stat-label">Messages Today</div>
            </div>
            <div class="stat-icon message-icon">
                <i class="fas fa-comment-dots"></i>
            </div>
        </div>
        <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ bot_stats.messages|default:0 }} messages</span>
        </div>
    </div>
    
    <div class="enhanced-stat-card activity-stats">
        <div class="stat-header">
            <div>
                <div class="stat-number" id="active-chats">{{ bot_chats|length|default:0 }}</div>
                <div class="stat-label">Active Chats</div>
            </div>
            <div class="stat-icon activity-icon">
                <i class="fas fa-comments"></i>
            </div>
        </div>
        <div class="stat-change positive">
            <i class="fas fa-arrow-up"></i>
            <span>+{{ bot_chats|length|default:0 }} active</span>
        </div>
    </div>
</div>

<!-- Activity Chart -->
<div class="chart-container">
    <div class="chart-header">
        <h3 class="chart-title">
            <div class="chart-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            Message Activity (Last 7 Days)
        </h3>
        <div class="chart-controls">
            <button class="chart-period-btn active" data-period="7d">7D</button>
            <button class="chart-period-btn" data-period="30d">30D</button>
            <button class="chart-period-btn" data-period="90d">90D</button>
        </div>
    </div>
    <canvas id="activityChart" height="100"></canvas>
</div>

<!-- Recent Activity -->
<div class="enhanced-chat-section">
    <div class="enhanced-chat-header">
        <h3 class="enhanced-section-title">
            <div class="enhanced-section-icon">
                <i class="fas fa-clock"></i>
            </div>
            Recent Activity
        </h3>
        <a href="{% url 'core:chats' %}" class="enhanced-view-all-btn">
            <i class="fas fa-external-link-alt"></i>
            View All
        </a>
    </div>
    
    <div class="enhanced-chat-list">
        {% if bot_chats %}
            {% for chat in bot_chats|slice:":5" %}
                <div class="enhanced-chat-item" onclick="window.location.href='{% url 'core:chat' chat.id %}'">
                    <div class="enhanced-chat-avatar">
                        {{ chat.title|first|upper }}
                    </div>
                    <div class="enhanced-chat-content">
                        <div class="enhanced-chat-title">{{ chat.title }}</div>
                        <div class="enhanced-chat-meta">
                            <div class="enhanced-chat-meta-item">
                                <i class="fas fa-robot"></i>
                                <span>{{ chat.bot.username }}</span>
                            </div>
                            <div class="enhanced-chat-meta-item">
                                <i class="fas fa-clock"></i>
                                <span>{{ chat.last_message_time|timesince }} ago</span>
                            </div>
                        </div>
                    </div>
                    <div class="enhanced-chat-actions">
                        {% if chat.unread_count > 0 %}
                            <div class="enhanced-unread-badge">{{ chat.unread_count }}</div>
                        {% endif %}
                        <div class="enhanced-status-badge status-active">Active</div>
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="enhanced-empty-state">
                <div class="enhanced-empty-state-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h5>No Recent Activity</h5>
                <p>Start monitoring your Telegram bots to see activity here.</p>
                <a href="{% url 'core:bots' %}" class="btn btn-primary">
                    <i class="fas fa-plus me-2"></i>
                    Add Your First Bot
                </a>
            </div>
        {% endif %}
    </div>
</div>

<!-- System Status -->
<div class="chart-container">
    <div class="chart-header">
        <h3 class="chart-title">
            <div class="chart-icon">
                <i class="fas fa-server"></i>
            </div>
            System Status
        </h3>
    </div>
    <div class="row">
        <div class="col-md-3">
            <div class="text-center">
                <div class="stat-number text-success">{{ bot_stats.active|default:0 }}</div>
                <div class="stat-label">Active Bots</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="text-center">
                <div class="stat-number text-warning">{{ bot_stats.inactive|default:0 }}</div>
                <div class="stat-label">Inactive Bots</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="text-center">
                <div class="stat-number text-danger">{{ bot_stats.error|default:0 }}</div>
                <div class="stat-label">Error Bots</div>
            </div>
        </div>
        <div class="col-md-3">
            <div class="text-center">
                <div class="stat-number text-info">{{ bot_stats.total|default:0 }}</div>
                <div class="stat-label">Total Bots</div>
            </div>
        </div>
    </div>
</div>

<script>
// Initialize activity chart
let activityChart;

function initActivityChart() {
    const ctx = document.getElementById('activityChart').getContext('2d');
    
    // Sample data - replace with real data from your backend
    const data = {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
            label: 'Messages',
            data: [12, 19, 15, 25, 22, 30, 28],
            borderColor: '#667eea',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            borderWidth: 3,
            fill: true,
            tension: 0.4,
            pointBackgroundColor: '#667eea',
            pointBorderColor: '#ffffff',
            pointBorderWidth: 2,
            pointRadius: 6,
            pointHoverRadius: 8
        }]
    };
    
    const config = {
        type: 'line',
        data: data,
        options: {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: {
                    display: false
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: 'rgba(0, 0, 0, 0.1)',
                        drawBorder: false
                    },
                    ticks: {
                        color: 'var(--text-secondary)',
                        font: {
                            size: 12
                        }
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        color: 'var(--text-secondary)',
                        font: {
                            size: 12
                        }
                    }
                }
            },
            interaction: {
                intersect: false,
                mode: 'index'
            },
            elements: {
                point: {
                    hoverBackgroundColor: '#667eea'
                }
            }
        }
    };
    
    activityChart = new Chart(ctx, config);
}

// Chart period controls
document.querySelectorAll('.chart-period-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        // Remove active class from all buttons
        document.querySelectorAll('.chart-period-btn').forEach(b => b.classList.remove('active'));
        // Add active class to clicked button
        this.classList.add('active');
        
        // Update chart data based on period
        updateChartData(this.dataset.period);
    });
});

function updateChartData(period) {
    // This would fetch new data from your backend based on the period
    console.log('Updating chart for period:', period);
    
    // For now, just update with sample data
    const sampleData = {
        '7d': [12, 19, 15, 25, 22, 30, 28],
        '30d': [10, 15, 20, 18, 25, 30, 22, 28, 35, 40, 38, 42, 45, 50, 48, 52, 55, 58, 60, 65, 62, 68, 70, 72, 75, 78, 80, 82, 85, 88],
        '90d': [10, 15, 20, 18, 25, 30, 22, 28, 35, 40]
    };
    
    if (activityChart && sampleData[period]) {
        activityChart.data.datasets[0].data = sampleData[period];
        activityChart.update('active');
    }
}

// Dashboard functions
function refreshDashboard() {
    const refreshBtn = document.querySelector('button[onclick="refreshDashboard()"]');
    const originalContent = refreshBtn.innerHTML;
    
    refreshBtn.innerHTML = '<span class="loading-spinner me-2"></span>Refreshing...';
    refreshBtn.disabled = true;
    
    // Simulate refresh - replace with actual API call
    setTimeout(() => {
        refreshBtn.innerHTML = originalContent;
        refreshBtn.disabled = false;
        
        // Show success message
        showNotification('Dashboard refreshed successfully!', 'success');
    }, 2000);
}

function exportData() {
    const exportBtn = document.querySelector('button[onclick="exportData()"]');
    const originalContent = exportBtn.innerHTML;
    
    exportBtn.innerHTML = '<span class="loading-spinner me-2"></span>Exporting...';
    exportBtn.disabled = true;
    
    // Simulate export - replace with actual export functionality
    setTimeout(() => {
        exportBtn.innerHTML = originalContent;
        exportBtn.disabled = false;
        
        // Show success message
        showNotification('Data exported successfully!', 'success');
    }, 3000);
}

function showSystemStatus() {
    // This would show a modal with detailed system status
    alert('System Status: All systems operational');
}

function showNotification(message, type = 'info') {
    // Create notification element
    const notification = document.createElement('div');
    notification.className = `alert alert-${type} alert-dismissible fade show position-fixed`;
    notification.style.cssText = 'top: 20px; right: 20px; z-index: 9999; min-width: 300px;';
    notification.innerHTML = `
        <i class="fas fa-info-circle me-2"></i>
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 5 seconds
    setTimeout(() => {
        if (notification.parentNode) {
            notification.remove();
        }
    }, 5000);
}

// Initialize dashboard
document.addEventListener('DOMContentLoaded', function() {
    initActivityChart();
    
    // Add animation to stat cards
    const statCards = document.querySelectorAll('.enhanced-stat-card');
    statCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.style.animation = 'slideIn 0.6s ease forwards';
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
    });
    
    // Add animation to quick action cards
    const quickActionCards = document.querySelectorAll('.quick-action-card');
    quickActionCards.forEach((card, index) => {
        card.style.animationDelay = `${index * 0.1}s`;
        card.style.animation = 'slideIn 0.6s ease forwards';
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
    });
    
    console.log('🚀 Enhanced Dashboard loaded successfully');
});

// Real-time updates (if WebSocket is enabled)
document.addEventListener('telegramNotification', function(e) {
    const notification = e.detail;
    
    // Update relevant counters
    if (notification.type === 'message') {
        const messageCount = document.getElementById('total-messages');
        if (messageCount) {
            const currentCount = parseInt(messageCount.textContent);
            messageCount.textContent = currentCount + 1;
        }
    }
    
    // Show notification
    showNotification(notification.content, 'info');
});
</script>
{% endblock %}
